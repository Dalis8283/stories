<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="icon.ico">
  <title>Story Repository</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 2rem;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    header {
      text-align: center;
      color: white;
      margin-bottom: 3rem;
      animation: fadeIn 0.8s ease-in;
    }

    h1 {
      font-size: clamp(2rem, 5vw, 3.5rem);
      font-weight: 700;
      margin-bottom: 0.5rem;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }

    .subtitle {
      font-size: clamp(1rem, 2vw, 1.2rem);
      opacity: 0.9;
    }

    .search-box {
      margin-bottom: 2rem;
      animation: slideDown 0.6s ease-out;
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .search-input {
      flex: 1;
      min-width: 200px;
      padding: 1rem 1.5rem;
      font-size: 1rem;
      border: none;
      border-radius: 50px;
      background: rgba(255, 255, 255, 0.95);
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
    }

    .search-input:focus {
      outline: none;
      box-shadow: 0 8px 32px rgba(0,0,0,0.2);
      transform: translateY(-2px);
    }

    .surprise-btn {
      padding: 1rem 2rem;
      font-size: 1rem;
      font-weight: 600;
      border: none;
      border-radius: 50px;
      background: rgba(255, 255, 255, 0.95);
      color: #764ba2;
      cursor: pointer;
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
      white-space: nowrap;
    }

    .surprise-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 32px rgba(0,0,0,0.2);
      background: white;
    }

    .surprise-btn:active {
      transform: translateY(0);
    }

    .folder-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1.5rem;
      animation: fadeIn 1s ease-in;
    }

    .folder-card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 16px;
      padding: 1.5rem;
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
      cursor: pointer;
      backdrop-filter: blur(10px);
    }

    .folder-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 48px rgba(0,0,0,0.2);
    }

    .folder-card.expanded {
      grid-column: 1 / -1;
    }

    .folder-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 0.5rem;
    }

    .folder-title {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      font-size: 1.25rem;
      font-weight: 600;
      color: #2d3748;
    }

    .folder-icon {
      font-size: 1.5rem;
      transition: transform 0.3s ease;
    }

    .folder-card.expanded .folder-icon {
      transform: rotate(90deg);
    }

    .file-count {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.875rem;
      font-weight: 600;
    }

    .file-list {
      display: none;
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 2px solid #e2e8f0;
    }

    .folder-card.expanded .file-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 0.75rem;
    }

    .file-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem;
      background: #f7fafc;
      border-radius: 8px;
      transition: all 0.2s ease;
      text-decoration: none;
      color: #2d3748;
    }

    .file-item:hover {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      transform: translateX(5px);
    }

    .file-icon {
      font-size: 1.2rem;
      flex-shrink: 0;
    }

    .file-name {
      font-size: 0.95rem;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .no-results {
      text-align: center;
      color: white;
      font-size: 1.5rem;
      padding: 3rem;
      display: none;
    }

    .surprise-result {
      display: none;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 16px;
      padding: 2rem;
      margin-bottom: 2rem;
      box-shadow: 0 8px 32px rgba(0,0,0,0.15);
      animation: fadeIn 0.5s ease-in;
    }

    .surprise-result.active {
      display: block;
    }

    .surprise-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      padding-bottom: 1rem;
      border-bottom: 2px solid #e2e8f0;
    }

    .surprise-title {
      font-size: 1.25rem;
      font-weight: 600;
      color: #2d3748;
    }

    .close-surprise {
      background: #f7fafc;
      border: none;
      border-radius: 50%;
      width: 32px;
      height: 32px;
      cursor: pointer;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }

    .close-surprise:hover {
      background: #e2e8f0;
      transform: rotate(90deg);
    }

    .surprise-file-info {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem;
      background: #f7fafc;
      border-radius: 8px;
      margin-bottom: 1rem;
    }

    .surprise-file-number {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      font-weight: 700;
      font-size: 1.1rem;
      min-width: 60px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .surprise-file-number:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }

    .surprise-file-details {
      flex: 1;
    }

    .surprise-file-name {
      font-weight: 600;
      color: #2d3748;
      margin-bottom: 0.25rem;
    }

    .surprise-folder-name {
      color: #718096;
      font-size: 0.9rem;
    }

    .surprise-open-btn {
      padding: 0.75rem 1.5rem;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .surprise-open-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @media (max-width: 768px) {
      body {
        padding: 1rem;
      }

      h1 {
        font-size: 1.75rem;
      }

      .subtitle {
        font-size: 0.9rem;
      }

      .search-box {
        gap: 0.75rem;
      }

      .search-input {
        min-width: 100%;
        padding: 0.875rem 1.25rem;
        font-size: 0.95rem;
      }

      .surprise-btn {
        width: 100%;
        padding: 0.875rem 1.5rem;
        font-size: 0.95rem;
      }

      .folder-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
      }

      .folder-card {
        padding: 1.25rem;
      }

      .folder-title {
        font-size: 1.1rem;
      }

      .folder-card.expanded .file-list {
        grid-template-columns: 1fr;
      }

      .file-item {
        padding: 0.625rem;
      }

      .file-name {
        font-size: 0.875rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üìö Story Repository</h1>
      <p class="subtitle">Browse and explore the collection</p>
    </header>

    <div class="search-box">
      <input type="text" class="search-input" id="searchInput" placeholder="üîç Search folders, files, or enter a number...">
      <button class="surprise-btn" id="surpriseBtn">üé≤ Surprise Me!</button>
    </div>

    <div class="surprise-result" id="surpriseResult">
      <div class="surprise-header">
        <div class="surprise-title">üé≤ Random Selection</div>
        <button class="close-surprise" id="closeSurprise">√ó</button>
      </div>
      <div class="surprise-file-info">
        <div class="surprise-file-number" id="surpriseNumber">#001</div>
        <div class="surprise-file-details">
          <div class="surprise-file-name" id="surpriseFileName">File Name</div>
          <div class="surprise-folder-name" id="surpriseFolderName">üìÅ Folder Name</div>
        </div>
        <button class="surprise-open-btn" id="surpriseOpenBtn">Open File</button>
      </div>
    </div>

    <div class="folder-grid" id="folderGrid"></div>
    <div class="no-results" id="noResults">No results found</div>
  </div>

  <script>
    const repository = {
      "From Outside": ["Mailgirl.html","Lady_Kathering_The_Christmas_Case.html","Uniform_Concerns.html","The_Theory_of_Nothing.html","The_Naked_Countess.html","The_Naked_Countess_II.html","Thief_Story.html","The_Lesson.html","A_Mistress_And_a_Little_Slave.html","Strange_Days.html","Dora's_Naked_Dare.html","Charmain_the_Naked_Maid.html","Monkey_And_The_Princess.html","Jack The Stripper And The Wedding.html","Kelly_the_Servant.html","Penny_-_Her_Bad_Dream_and_What_Followed.html","Zoe_Naked_In_School.html","Rebekah_the_Helper's_Union_Member.html","Naked_and_Unafraid.html","The_Rent.html","Only_One_Naked_by_Cassie Caine.html","Saving_a_Relic.html","KAT's_Collection.html","Soccer_Naked.html","Clementine_Dejesus_by_Linda_Bare.html","The_New_Regime.html","Sherlock_Holmes.html","Innocent_American_Wife_strip-searched_in_public_in_an_African_Airport.html","Power_Divest_Those_Who_Do_Not_Have_It.html","Casi_Secret_-_RSW.html","Diane_After_Work_-_RSW.html","Janet_Incentive_Program_-_RSW.html","Holi_Babysitting_Job_-_RSW.html","Tradition_-_RSW.html","The_Princess_Errant.html","Red_Fannie_Annie.html","A_Firebug_Gets_Punished.html","The_ENF_Catcher.html","Legends_Of_The_Fel.html","Leila's_Humiliation.html","Laundry_Day.html","Natural_Beauty.html","SOMA_Vestiphobia_Attorney.html","Amy_and_the_Doctor.html","The_Girl_with_no_Name.html","The_New_Girl.html","An_Innocent_Prank_Enf_story.html","A_Year_Of_Nudity.html","Naughty_Nice_and_Naked.html","Streak_of_Shame.html","Yukis_ENF_Office_Job.html","Word_of_Honor.html","Ninja_Training.html","Jenny_Baker_in_ADP.html","Living_in_a_Nudist_House.html","Chez_Louise.html","Lucina_Masked_Streaker.html","Unintentional.html","Naturally_Nora.html","Queenfall.html","Adventure_in_the_Willows.html","The_Bath_Towel.html","Trisha_the_Terrible.html","Legalised_Slavery.html","I_got_reincarnated_naked_and_can't_find_a_pair_of_pants.html","How_Sarah_Became_a_Nudist.html","Nude_World_Order.html","The_Party.html","Katie,_the_President.html","How_Kristen_Spent_Her_Summer_Vacation.html","Trials_of_Champions.html","The_Pussy_Shield.html","The_Housekeeper.html","Everybody_is_Sleeping.html","In_a_Room_Full_of_People.html"],
      "Mailgirl": ["Mailgirl.html","The_Intern.html","A_Mailgirl's_Story.html","A_Very_Merry_Mailgirls_XMas.html","Life_Among_the_Mailgirls.html","Adventures_of_a_Mailgirl.html","Claire_at_IDG_Mailgirls_Story.html","MailGirls_at_IDG_and_Halloween.html","Mailgirls_at_Messidor.html","Mailgirls_Down_Under.html","Naked Best Friend Exhibitionist CFNF Fun.pdf"],
      "Milking": ["New_Girl_For_The_Milking_Barn.html","Life_In_A_Milking_Barn.html","Mandatory_Milking_Service.html"],
      "Tami_Smithers": ["The_Unintentional_Nudist.html","Home_for_Thanksgiving.html","The_Unintentional_Nudist_3.html","The_Unintentional_Nudist_4.html","The_Unintentional_Nudist_5.html","The_Unintentional_Nudist_6.html","The_Unintentional_Nudist_7.html","The_Unintentional_Nudist_8.html","The_Unintentional_Nudist_9.html","The_Unintentional_Nudist_10.html","The_Unintentional_Nudist_11.html","The_Unintentional_Nudist_12.html","The_Unintentional_Nudist_13.html","Tami_The_Naked_Freshman.html","Tami_Saves_Mei_Lin.html","Tami_Beethoven_1.html","Tami_Beethoven_2.html","Tami_Beethoven_3.html","Tami_Beethoven_4.html","Interview_With_The_Professor.html"],
      "SliceReality_Mailgirl's_Stories": ["Mailgirls_-_Easter_'Mailbunny'.html","Mailgirls_-_Flight_Duty.html","Mailgirls_-_Program_Expansion.html","Mailgirls_-_Working_Late_for_Christmas.html","The_Mailgirl_Movie_-_Red_Carpet.html","Mailgirls_-_Basement_Dorm.html","Mailgirls_-_Trip.html"],
      "A_Friend_Who_Cares": ["AFWC_A_Friend_Who_Cares_01.html","AFWC_A_Friend_Who_Cares_02.html","AFWC_A_Friend_Who_Cares_03.html","AFWC_A_Friend_Who_Cares_04.html","AFWC_A_Friend_Who_Cares_05.html","AFWC_A_Friend_Who_Cares_09to10.html","AFWC_A_Friend_Who_Cares_11.html","AFWC_A_Friend_Who_Cares_12.html","AFWC_A_Friend_Who_Cares_13.html","AFWC_A_Friend_Who_Cares_14.html","AFWC_A_Friend_Who_Cares_15.html","AFWC_A_Friend_Who_Cares_16.html","AFWC_A_Friend_Who_Cares_17.html","AFWC_A_Friend_Who_Cares_18.html","AFWC_A_Friend_Who_Cares_19.html"],
      "Blanke_Schande": ["Hyacinth_Buddy.html"],
      "Ponygirl": ["Single_Stories.html","Ponygirl.html","Nine_Days.html","A_beginning_of_A_Ponygirl.html","The_Goblin_Whisperer_and_her_Ponygirl.html","Yet_Another_Ponygirl_Story.html","Ponygirl_Minder.html","Life_on_A_Pony_Farm.html","Boots_and_her_Buddies.html","The_Summer_Job.html","The_Vanishing_Pony.html","Reluctant_Ponygirl.html","Life_At_The_Ponygirl_Stables.html"],
      "BDSMLibrary": ["Helen's_Ordeal.html","Spanish_Donkey.html","The_Law_of_private_ground.html","Office_Screw_Up.html","Allie_and_Nicole.html","A_Mother's_Submission.html"],
      "Author_Harry": ["Caroline's_Inheritance.html","Princess_Sara.html","Ladies'_Lodge.html","Doris,_Friends _and_Pirates.html","Golden_Guard.html"],
      "Falcon_&_Seahawk": ["The_Reluctant_Exhibitionist.html","The_Reluctant_Exhibitionist_Returns.html","The_Reluctant_Exhibitionist_-_Family_Reunion.html","Allison√¢‚Ç¨‚Ñ¢s_Inheritance.html"],
      "Evacuees_Tale": ["Evacuees_Tale_01.html","Evacuees_Tale_02.html","Evacuees_Tale_03.html"],
      "Family_Traditional_Picture_Day": ["Family_Tradition_Picture_Day_02kto02l.html","Family_Tradition_Picture_Day_02gto02j.html","Family_Tradition_Picture_Day_02d_to_2e.html","Family_Tradition_Picture_Day_01c_to_2c.html","Family_Tradition_Picture_Day_01.html"],
      "Collaege_Girl_Kate": ["College_Girl_Kate_01.html","College_Girl_Kate_02.html","College_Girl_Kate_03.html","College_Girl_Kate_04.html","College_Girl_Kate_05.html","College_Girl_Kate_06.html","College_Girl_Kate_07.html"],
      "Girls Don't Need Modesty": ["Girls_Dont_Need_Modesty_01.html","Girls_Dont_Need_Modesty_02A.html","Girls_Dont_Need_Modesty_02to03.html","Girls_Dont_Need_Modesty_04.html","Girls_Dont_Need_Modesty_05.html","Lauren_Prentiss_Medical_Examination_01.html"],
      "Hannas_Embarrassing_Accident": ["Hannas_Embarrassing_Accident_01to03.html","Hannas_Embarrassing_Accident_04to07.html","Hannas_Embarrassing_Accident_08to12.html","Hannas_Embarrassing_Accident_13to17.html"],
      "Laundry_Machine_Mishap": ["Laundry_Machine_Mishap_01.html","Laundry_Machine_Mishap_02.html","Laundry_Machine_Mishap_03.html","Laundry_Machine_Mishap_04.html","Laundry_Machine_Mishap_05.html","Laundry_Machine_Mishap_06.html","Laundry_Machine_Mishap_07.html","Laundry_Machine_Mishap_08.html","Laundry_Machine_Mishap_09.html","Laundry_Machine_Mishap_10.html"],
      "Lias_New_Reality": ["Lias_New_Reality_01to04.html","Lias_New_Reality_05to07.html","Lias_New_Reality_08.html","Lias_New_Reality_09to10.html","Lias_New_Reality_11.html","Lias_New_Reality_12.html","Lias_New_Reality_13.html","Lias_New_Reality_14to15.html","Lias_New_Reality_16.html"],
      "NAKED_Naked_and_Abashed_Kids": ["NAKED_Naked_and_Abashed_Kids_01.html","NAKED_Naked_and_Abashed_Kids_02.html","NAKED_Naked_and_Abashed_Kids_03.html","NAKED_Naked_and_Abashed_Kids_04.html","NAKED_Naked_and_Abashed_Kids_05.html","NAKED_Naked_and_Abashed_Kids_06.html","NAKED_Naked_and_Abashed_Kids_07.html","NAKED_Naked_and_Abashed_Kids_08.html","NAKED_Naked_and_Abashed_Kids_09.html","NAKED_Naked_and_Abashed_Kids_10.html","NAKED_Naked_and_Abashed_Kids_11.html"],
      "Old_Fashioned_Family": ["Old_Fashioned_Family_01to02.html","Old_Fashioned_Family_03to04.html","Old_Fashioned_Family_05to07.html"],
      "The_New_Rules": ["Fort_of_Fantasy.html","The_New_Rules.html"],
      "Oneshot": ["Enjoying_View_01to02.html","Little_Susies_Suppository_Ordeal.html","Lilys_Embarrassing_Punishment.html","Lisa_On_the_Beach.html","Jackson_Three_Bares.html","Babysitting_Em_01.html","Child_Protective_Court.html","Failure_To_Communicate.html","Summer_That_Changed_Everything_01to07.html","TAE_Tiffany_Anson_Exposed.html"],
      "Playing_Doctor": ["Playing_Doctor_01to02.html","Playing_Doctor_03to04.html","Playing_Doctor_05.html"],
      "Red_Fannie_Annie": ["Red_Fannie_Annie_1.html","Red_Fannie_Annie_2.html"],
      "The_Wrong_Slipper": ["The_Wrong_Slipper_01.html","The_Wrong_Slipper_02.html","The_Wrong_Slipper_03.html"],
      "Temple_of_Venus": ["Temple_of_Venus_01.html","Temple_of_Venus_02to03.html"],
      "Misty_Jones": ["Girlfriend's_Arrest.html","Girlfriend's_Arrest_2.html","The_Halloween_Costume.html","Caught_and_Punished.html"]
    };

    const baseFolder = ".";
    const folderGrid = document.getElementById("folderGrid");
    const searchInput = document.getElementById("searchInput");
    const surpriseBtn = document.getElementById("surpriseBtn");
    const noResults = document.getElementById("noResults");
    const surpriseResult = document.getElementById("surpriseResult");
    const closeSurprise = document.getElementById("closeSurprise");
    const surpriseNumber = document.getElementById("surpriseNumber");
    const surpriseFileName = document.getElementById("surpriseFileName");
    const surpriseFolderName = document.getElementById("surpriseFolderName");
    const surpriseOpenBtn = document.getElementById("surpriseOpenBtn");

    let allFilesWithNumbers = [];
    let currentSurpriseUrl = '';

    function formatName(name) {
      return name.replaceAll('_', ' ').replace('.html', '').replace('.pdf', '');
    }

    function getAllFilesWithNumbers() {
      const allFiles = [];
      let fileNumber = 1;
      Object.entries(repository).forEach(([folderName, files]) => {
        files.forEach(file => {
          allFiles.push({ 
            number: fileNumber++,
            folder: folderName, 
            file: file 
          });
        });
      });
      return allFiles;
    }

    function showRandomFile() {
      if (allFilesWithNumbers.length === 0) return;
      
      const randomIndex = Math.floor(Math.random() * allFilesWithNumbers.length);
      const randomItem = allFilesWithNumbers[randomIndex];
      
      // Update search to the random number
      searchInput.value = String(randomItem.number);
      renderFolders(String(randomItem.number));
    }

    function closeSurpriseResult() {
      surpriseResult.classList.remove('active');
    }

    function openSurpriseFile() {
      if (currentSurpriseUrl) {
        window.open(currentSurpriseUrl, '_blank');
      }
    }

    function renderFolders(filter = '') {
      folderGrid.innerHTML = '';
      let hasResults = false;

      // Check if filter is a number
      const isNumberSearch = /^\d+$/.test(filter);
      const searchNumber = isNumberSearch ? parseInt(filter) : null;

      // If searching by number, show in surprise card format
      if (isNumberSearch && searchNumber) {
        const foundFile = allFilesWithNumbers.find(f => f.number === searchNumber);
        if (foundFile) {
          surpriseNumber.textContent = `#${String(foundFile.number).padStart(3, '0')}`;
          surpriseFileName.textContent = formatName(foundFile.file);
          surpriseFolderName.textContent = `üìÅ ${formatName(foundFile.folder)}`;
          currentSurpriseUrl = `${baseFolder}/${foundFile.folder}/${foundFile.file}`;
          surpriseResult.classList.add('active');
          
          // Hide the grid when showing number result
          folderGrid.style.display = 'none';
          noResults.style.display = 'none';
          return;
        } else {
          // Number not found
          surpriseResult.classList.remove('active');
          noResults.style.display = 'block';
          folderGrid.style.display = 'none';
          return;
        }
      }

      // Text search - show grid as before
      surpriseResult.classList.remove('active');

      Object.entries(repository).forEach(([folderName, files]) => {
        const folderNameFormatted = formatName(folderName);
        
        let filteredFilesData = [];
        
        files.forEach(file => {
          const fileData = allFilesWithNumbers.find(f => f.folder === folderName && f.file === file);
          if (!fileData) return;
          
          const fileNameFormatted = formatName(file);
          
          const matchesText = !filter || 
            fileNameFormatted.toLowerCase().includes(filter.toLowerCase()) ||
            folderNameFormatted.toLowerCase().includes(filter.toLowerCase());
          
          if (matchesText) {
            filteredFilesData.push({ file, fileData });
          }
        });

        if (filteredFilesData.length === 0) return;
        hasResults = true;

        const folderCard = document.createElement("div");
        folderCard.className = "folder-card";

        const folderHeader = document.createElement("div");
        folderHeader.className = "folder-header";

        const folderTitle = document.createElement("div");
        folderTitle.className = "folder-title";
        folderTitle.innerHTML = `<span class="folder-icon">üìÅ</span><span>${folderNameFormatted}</span>`;

        const fileCount = document.createElement("span");
        fileCount.className = "file-count";
        fileCount.textContent = `${filteredFilesData.length} file${filteredFilesData.length !== 1 ? 's' : ''}`;

        folderHeader.appendChild(folderTitle);
        folderHeader.appendChild(fileCount);

        const fileList = document.createElement("div");
        fileList.className = "file-list";

        filteredFilesData.forEach(({ file, fileData }) => {
          const fileItem = document.createElement("a");
          fileItem.className = "file-item";
          fileItem.href = `${baseFolder}/${folderName}/${file}`;
          fileItem.target = "_blank";
          fileItem.innerHTML = `
            <span class="file-icon">üìÑ</span>
            <span class="file-name">#${String(fileData.number).padStart(3, '0')} - ${formatName(file)}</span>
          `;
          fileList.appendChild(fileItem);
        });

        folderCard.appendChild(folderHeader);
        folderCard.appendChild(fileList);

        folderCard.addEventListener("click", (e) => {
          if (e.target.closest('.file-item')) return;
          folderCard.classList.toggle("expanded");
        });

        folderGrid.appendChild(folderCard);
      });

      noResults.style.display = hasResults ? 'none' : 'block';
      folderGrid.style.display = hasResults ? 'grid' : 'none';
    }

    searchInput.addEventListener("input", (e) => {
      const value = e.target.value.trim();
      renderFolders(value);
    });

    surpriseBtn.addEventListener("click", showRandomFile);
    closeSurprise.addEventListener("click", closeSurpriseResult);
    surpriseOpenBtn.addEventListener("click", openSurpriseFile);
    
    // Click on number to filter
    surpriseNumber.addEventListener("click", () => {
      const numberText = surpriseNumber.textContent.replace('#', '').replace(/^0+/, '') || '0';
      searchInput.value = numberText;
      renderFolders(numberText);
      searchInput.focus();
    });

    // Initialize
    allFilesWithNumbers = getAllFilesWithNumbers();
    renderFolders();
  </script>
</body>
</html>